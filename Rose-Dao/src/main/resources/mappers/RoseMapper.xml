<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nf.theroseshop.dao.RoseMapper">

    <!--鲜花模糊查询 根据名字 / 价格-->
    <select id="getRosePage" resultType="Rose">
        select * from rose
        <where>
            <if test="rose_name!=null and rose_name!=''">
                and rose_name like concat(concat("%",#{rose_name}),"%")
            </if>
            <if test="rose_price!=null and rose_price!=''">
                and rose_price like concat(concat("%",#{rose_price}),"%")
            </if>
        </where>
        limit #{pages},#{limitt}
    </select>

    <!--鲜花总页数-->
    <select id="getRoseSize" resultType="int">
        select COUNT(*) from rose
        <where>
            <if test="rose_name!=null and rose_name!=''">
                and rose_name like concat(concat("%",#{rose_name}),"%")
            </if>
            <if test="rose_price!=null and rose_price!=''">
                and rose_price like concat(concat("%",#{rose_price}),"%")
            </if>
        </where>
    </select>

    <!--增加-->
    <insert id="roseAdd">
        INSERT INTO rose (rose_code,rose_name,rose_content,rose_price,rose_reason,rose_composition,rose_story,rose_explain,rose_stock,rose_sale) VALUES (#{rose_code},#{rose_name},#{rose_content},#{rose_price},#{rose_reason},#{rose_composition},#{rose_story},#{rose_explain},#{rose_stock},#{rose_sale});
    </insert>

    <!--删除-->
    <delete id="deleteRose" parameterType="int">
        delete from rose where rose_id=#{rose_id};
    </delete>

    <!--修改-->
    <update id="updataRose"  useGeneratedKeys="true" keyProperty="rose_id">
        update rose set rose_name=#{rose_name},rose_content=#{rose_content},rose_price=#{rose_price},rose_reason=#{rose_reason},rose_composition=#{rose_composition},rose_story=#{rose_story},rose_explain=#{rose_explain},rose_stock=#{rose_stock},rose_sale=#{rose_sale} where rose_id=#{rose_id};
    </update>

</mapper>